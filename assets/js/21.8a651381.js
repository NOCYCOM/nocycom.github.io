(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{367:function(s,t,e){"use strict";e.r(t);var r=e(42),a=Object(r.a)({},(function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h1",{attrs:{id:"_1-编写第一个智能合约hellobos。"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-编写第一个智能合约hellobos。"}},[s._v("#")]),s._v(" 1.编写第一个智能合约HelloBOS。")]),s._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[s._v("声明")]),s._v(" "),e("p",[s._v("《区块链财富指北》系列文章由"),e("a",{attrs:{href:"https://nocy.com",target:"_blank",rel:"noopener noreferrer"}},[s._v("NOCY.COM"),e("OutboundLink")],1),s._v("策划，肖南飞主笔撰写。\n技术选型基于BOScore公链，旨在以有趣易懂的方式传播普及区块链技术，不构成任何投资建议！")])]),s._v(" "),e("h3",{attrs:{id:"_0x01-传统金融的颠覆者"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_0x01-传统金融的颠覆者"}},[s._v("#")]),s._v(" 0x01 传统金融的颠覆者")]),s._v(" "),e("p",[s._v("陈志武教授在《金融通识课》中有一句贯彻全篇的总结："),e("br"),s._v(" "),e("strong",[s._v("“金融的本质是价值的跨时空交换。”")])]),s._v(" "),e("p",[e("img",{attrs:{src:"/step7/step7_01.jpg",alt:"00"}})]),s._v(" "),e("p",[s._v("而合约，就是价值跨时空交换的载体。"),e("br"),s._v("\n人类社会文明发展之初至现在，社会经济秩序的构建都是基于传统合约来实现的，"),e("br"),s._v("\n如保险合约、贸易合约等等。"),e("br"),s._v("\n传统合约，最大的痼疾在于违约风险，即合约中利益方不履约。"),e("br"),s._v("\n智能合约，就是将合约条款通过代码形式进行锁定和传递，并且由代码直接干预和分配。"),e("br"),s._v("\n它杜绝任何可能的人工干预（如欺诈）及不确定性（如违约、纠纷），让合约结果变得更为清晰、可预测。"),e("br"),s._v("\n智能合约的出现第一次将区块链的应用从单纯的支付转账扩展到了所有的商业逻辑。"),e("br"),s._v("\n智能合约正在席卷传统金融行业，成为游戏规则颠覆者。"),e("br")]),s._v(" "),e("h3",{attrs:{id:"_0x02-安装cdt开发包"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_0x02-安装cdt开发包"}},[s._v("#")]),s._v(" 0x02 安装CDT开发包")]),s._v(" "),e("p",[s._v("CDT的全称是Contract Development Toolkit,翻译过来就是智能合约开发工具包。"),e("br"),s._v("\nBOSCore的CDT开源地址：\n"),e("a",{attrs:{href:"https://github.com/boscore/bos.cdt",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://github.com/boscore/bos.cdt"),e("OutboundLink")],1),s._v(" "),e("br")]),s._v(" "),e("p",[e("img",{attrs:{src:"/step7/step7_01.png",alt:"01"}})]),s._v(" "),e("p",[s._v("拉取cdt的docker最新版,截止本文是v3.0.2版本:"),e("br")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("docker pull boscore/cdt:v3.0.2\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[e("img",{attrs:{src:"/step7/step7_02.png",alt:"02"}})]),s._v(" "),e("p",[s._v("新建boscdt文件夹，然后启动CDT容器,映射boscdt文件夹到容器的/data目录，并保存在后台一直运行："),e("br")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("docker run --name boscdt -v ~/boscdt:/data -itd boscore/cdt:v3.0.2 /bin/bash\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("查看下运行情况："),e("br")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("docker ps\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[e("img",{attrs:{src:"/step7/step7_03.png",alt:"03"}})]),s._v(" "),e("p",[s._v("以后，只需要用下面的exec命令就可以进入boscdt容器内,执行编译智能合约等各种操作："),e("br")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("docker exec -it boscdt /bin/bash\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[e("img",{attrs:{src:"/step7/step7_04.png",alt:"04"}})]),s._v(" "),e("h3",{attrs:{id:"_0x03-安装vscode编辑器"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_0x03-安装vscode编辑器"}},[s._v("#")]),s._v(" 0x03 安装VScode编辑器")]),s._v(" "),e("p",[s._v("VScode是微软主导开发的一款免费,开源,轻量,跨平台代码编辑工具。"),e("br"),s._v("\n官方下载地址：\n"),e("a",{attrs:{href:"https://code.visualstudio.com/Download",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://code.visualstudio.com/Download"),e("OutboundLink")],1),s._v(" "),e("br")]),s._v(" "),e("p",[e("img",{attrs:{src:"/step7/step7_05.png",alt:"05"}})]),s._v(" "),e("p",[s._v("VScode是近年来非常流行的代码编辑器，相关下载使用教程在网上搜索即可，在此不再展开。"),e("br"),s._v("\n代码编辑器，各有所好。如果你有原来用的乘手的，直接用原来的即可。"),e("br")]),s._v(" "),e("h3",{attrs:{id:"_0x04-编写第一个智能合约代码"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_0x04-编写第一个智能合约代码"}},[s._v("#")]),s._v(" 0x04 编写第一个智能合约代码")]),s._v(" "),e("p",[s._v("在boscdt文件夹下建立一个名为boscfzb12345的新文件夹。"),e("br"),s._v("\n在boscfzb12345文件夹内创建boscfzb12345.cpp。"),e("br")]),s._v(" "),e("blockquote",[e("p",[s._v("在EOSIO系统中，创建智能合约时通常将命名文件及文件夹与部署的账户名称保持一致。"),e("br"),s._v("\n即：要在boscfzb12345账号上部署的智能合约，取名为boscfzb12345.cpp即可。"),e("br")])]),s._v(" "),e("p",[s._v("在boscfzb12345.cpp中输入如下代码："),e("br")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('#include <eosio/eosio.hpp>\nusing namespace eosio;\nclass [[eosio::contract]] boscfzb12345 : public contract {\n  public:\n      using contract::contract;\n      [[eosio::action]]\n      void hi( name user ) {\n         print( "Hello, ", user);\n      }\n};\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br")])]),e("p",[s._v("保存后，使用eosio-cpp编译该源文件。"),e("br")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("eosio-cpp -o boscfzb12345.wasm boscfzb12345.cpp\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[e("img",{attrs:{src:"/step7/step7_06.png",alt:"06"}})]),s._v(" "),e("p",[s._v("在VSCode编辑器中，boscfzb12345.cpp同级文件夹里出现了同名的wasm和abi两个编译后文件。"),e("br")]),s._v(" "),e("p",[e("img",{attrs:{src:"/step7/step7_07.png",alt:"07"}})]),s._v(" "),e("h3",{attrs:{id:"_0x05-部署合约到bos主网"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_0x05-部署合约到bos主网"}},[s._v("#")]),s._v(" 0x05 部署合约到BOS主网")]),s._v(" "),e("p",[s._v("下面我们将合约部署到BOS主网的boscfzb12345账号。"),e("br")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("cleos -u https://api.boscore.io set contract boscfzb12345 ~/boscdt/boscfzb12345 -p boscfzb12345@active\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[e("img",{attrs:{src:"/step7/step7_08.png",alt:"08"}})]),s._v(" "),e("p",[s._v("然后，用boscfzb12345发送Action测试下。"),e("br")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("cleos -u https://api.boscore.io push action boscfzb12345 hi '[\"boscfzb12345\"]' -p boscfzb12345@active\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[e("img",{attrs:{src:"/step7/step7_09.png",alt:"09"}})]),s._v(" "),e("p",[s._v("发送成功。"),e("br")]),s._v(" "),e("blockquote",[e("p",[s._v("合约的print命令并没有在命令行后面打印出“Hello,boscfzb12345”。"),e("br"),s._v("\n这是因为我们是直接在BOS主网上，对应主网节点没有配置--contracts-console来开启合约调试模式。"),e("br")])]),s._v(" "),e("p",[s._v("再在区块浏览器上查看下boscfzb12345账号。"),e("br"),s._v(" "),e("a",{attrs:{href:"https://bos.bloks.io/account/boscfzb12345",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://bos.bloks.io/account/boscfzb12345"),e("OutboundLink")],1),e("br")]),s._v(" "),e("p",[e("img",{attrs:{src:"/step7/step7_10.png",alt:"10"}})]),s._v(" "),e("p",[s._v("boscfzb12345账号下多了一个Contract选项。"),e("br"),s._v("\n这意味着该账号已经部署了一个智能合约，在该选项下还可以看到hi这一操作选项。"),e("br")]),s._v(" "),e("h3",{attrs:{id:"_0x06-下篇内容预告"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_0x06-下篇内容预告"}},[s._v("#")]),s._v(" 0x06 下篇内容预告")]),s._v(" "),e("p",[s._v("在下篇文章里，我们继续探索智能合约。"),e("br"),s._v(" "),e("strong",[s._v("智能合约（2）：发行自己的链上通证（Token）。")]),e("br")]),s._v(" "),e("blockquote",[e("p",[s._v("Token一词，开始有人翻译为“代币”，好理解但是不够准确。"),e("br"),s._v("\n孟岩老师后来重新把token翻译为“通证”，即可流通的加密数字凭证。"),e("br"),s._v("\n既包含有代币、积分的意思，也可以理解为进入某区块链项目的通行证。"),e("br"),s._v("\n通证（Token）本身是没有价值的，只是价值的载体。"),e("br"),s._v("\n需要依附于链上或者链下的项目，来承载对应的价值。"),e("br"),s._v("\n当然，共识也是一种价值，而且是一种很强大的价值。"),e("br"),s._v("\n比如黄金、比如比特币，他们的价值主要来源于强大的共识。"),e("br"),s._v("\n在这篇文章里，我们来体验下如何发行自己的链上通证（Token）。"),e("br")])]),s._v(" "),e("h3",{attrs:{id:"_0x07-联系及投票支持"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_0x07-联系及投票支持"}},[s._v("#")]),s._v(" 0x07 联系及投票支持")]),s._v(" "),e("p",[s._v("《区块链财富指北》系列文章github存档地址："),e("a",{attrs:{href:"https://nocycom.github.io",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://nocycom.github.io"),e("OutboundLink")],1),s._v("。\n"),e("a",{attrs:{href:"https://nocy.com",target:"_blank",rel:"noopener noreferrer"}},[s._v("NOCY.com"),e("OutboundLink")],1),s._v("团队致力于区块链基础知识传播，欢迎读者朋友留言共同交流。\n由于发文时间仓促及区块链领域技术迭代频繁，在教程中可能有这样或那样的错漏之处，还请读者与我们一起查漏补缺、将系列教程优化的更好。")]),s._v(" "),e("p",[s._v("如果觉得这系列教程有点意思，请投票支持我们的节点："),e("a",{attrs:{href:"https://bos.eosx.io/tools/vote?voteTo=nocy.com",target:"_blank",rel:"noopener noreferrer"}},[s._v("BOS公链NOCYCOM节点"),e("OutboundLink")],1),s._v("，"),e("a",{attrs:{href:"https://www.eosx.io/tools/vote?voteTo=nocy.com",target:"_blank",rel:"noopener noreferrer"}},[s._v("EOS公链NOCYCOM节点"),e("OutboundLink")],1),s._v("。您的投票是本教程持续更新的动力源泉，谢谢。")])])}),[],!1,null,null,null);t.default=a.exports}}]);