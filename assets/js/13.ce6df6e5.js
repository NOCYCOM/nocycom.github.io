(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{359:function(t,r,s){"use strict";s.r(r);var e=s(42),a=Object(e.a)({},(function(){var t=this,r=t.$createElement,s=t._self._c||r;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"_2-百行python代码演示一私钥生成多公链公钥原理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-百行python代码演示一私钥生成多公链公钥原理"}},[t._v("#")]),t._v(" 2. 百行Python代码演示一私钥生成多公链公钥原理")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("声明")]),t._v(" "),s("p",[t._v("《区块链财富指北》系列文章由"),s("a",{attrs:{href:"https://nocy.com",target:"_blank",rel:"noopener noreferrer"}},[t._v("NOCY.COM"),s("OutboundLink")],1),t._v("策划，肖南飞主笔撰写。"),s("br"),t._v("\n技术选型基于BOScore公链，旨在以有趣易懂的方式传播普及区块链技术，不构成任何投资建议！")])]),t._v(" "),s("h3",{attrs:{id:"_0x01-学习之前说学习"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_0x01-学习之前说学习"}},[t._v("#")]),t._v(" 0x01 学习之前说学习")]),t._v(" "),s("p",[t._v("今天这篇文章涉及"),s("strong",[t._v("Python编程")]),t._v("，可能会略显枯燥。"),s("br"),t._v("\n而且我真诚的希望读者朋友不要只是浮光掠影的看一遍，"),s("strong",[t._v("不要停留在被动学习")]),t._v("，"),s("br"),t._v("\n而是"),s("strong",[t._v("进行主动学习")]),t._v("，照着文章的内容实实在在编码练习一下。"),s("br"),t._v("\n所以，在学习之前说下为什么要主动学习就显得很有必要。")]),t._v(" "),s("p",[s("img",{attrs:{src:"/step2/step1_01.png",alt:"学习金字塔"}})]),t._v(" "),s("p",[s("strong",[t._v('有一个"学习金字塔"理论')]),t._v("，人的学习分为“被动学习”和“主动学习”两个层次。"),s("br"),t._v("\n从图中我们可以看出，你听人演讲，阅读文章，或者学习视频等等，学习内容留存率都很低。"),s("br"),t._v("\n因为你是在被别人灌输，在听别人说。"),s("br"),t._v("\n只有开始自己思考，开始总结归纳、讨论交流，开始动手践行，并开始对外输出，你才会真正了解掌握知识。"),s("br"),t._v(" "),s("strong",[t._v("纸上得来终觉浅，绝知此事要躬行。")]),s("br"),t._v("\n相信在工作生活中，我们都有这样的体会。")]),t._v(" "),s("p",[s("img",{attrs:{src:"/step2/step1_011.jpeg",alt:"被动学习"}})]),t._v(" "),s("p",[t._v("被动学习，很多时候只是满足一个人的学习虚荣心，"),s("strong",[t._v("让你看起来很努力罢了!")]),s("br"),t._v("\n就好比登山，"),s("br"),t._v("\n被动学习的始终要等别人修好路才能登上山；"),s("br"),t._v("\n主动学习的则是通过观察模仿修路的方法自己修好路登上山。"),s("br"),t._v(" "),s("strong",[t._v("只有主动学习，才能将别人的知识真正有效转化为自己的技能。")])]),t._v(" "),s("p",[s("img",{attrs:{src:"/step2/step1_02.jpeg",alt:"逆人性"}})]),t._v(" "),s("p",[s("strong",[t._v("学习是一件“逆人性”的事情。")]),s("br"),t._v("\n投入精力去主动学习技术，值得吗？"),s("br"),t._v("\n随着时代变迁，计算机技术已经成了一种通用知识，而不是专业知识。"),s("br"),t._v("\n学习计算机技术已经不仅仅是一个行业谋生工具，而成了"),s("strong",[t._v("理解现代社会运行原理的必备技能。")]),s("br"),t._v("\n阮一峰老师在"),s("a",{attrs:{href:"http://www.ruanyifeng.com/blog/2017/11/technology-training.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("《技术教育的兴起》"),s("OutboundLink")],1),t._v("文尾有一段话，是这么说的：")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("技术教育的兴起")]),t._v(" "),s("p",[t._v("未来的形势远比我们想象的严峻，技术会取代越来越多的人工。展望未来，大部分人，甚至90%以上的人，终其一生只是在社会的底层挣扎，拿着小康或比温饱线略高的工资。"),s("br"),t._v("\n只有技术，才有可能让你翻身。比特币就是一个例子，过去几年中，价格上涨了几百万倍。我知道的许多技术人都通过比特币发了财，而这只是技术带来的财富浪潮之中的一个突出案例。如果你了解技术，你就会看到有这样的机会。现在看上去，只有技术才能提供这样的从底层快速上升的机会。"),s("br"),t._v("\n我有一种悲观的预感。未来只有两种途径可以改变人生，一种是学习技术，另一种是购买彩票。")])]),t._v(" "),s("p",[t._v("对于新接触编程的朋友来说，不要担心自己没基础。"),s("br"),t._v(" "),s("strong",[t._v("区块链领域，没有谁是科班出身。")]),s("br"),t._v("\n种一棵树最好的时间是十年前，其次是现在。")]),t._v(" "),s("h3",{attrs:{id:"_0x02-寻宝工具：python环境的安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_0x02-寻宝工具：python环境的安装"}},[t._v("#")]),t._v(" 0x02 寻宝工具：Python环境的安装")]),t._v(" "),s("p",[s("strong",[t._v("工欲善其事，必先利其器。")]),t._v(" "),s("br"),t._v("\n在我们从代码层面探秘“私钥”谜团之前，需要先安装一个神器：Python。")]),t._v(" "),s("blockquote",[s("p",[t._v("本节知识是Python环境的安装，较为简单。\n电脑环境中已有Python3.7环境的读者朋友略过，直接看下一节即可。")])]),t._v(" "),s("h4",{attrs:{id:"python和anaconda简介"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#python和anaconda简介"}},[t._v("#")]),t._v(" Python和Anaconda简介")]),t._v(" "),s("p",[t._v("Python是一门面向对象的解释型计算机语言,它的特点是语法简洁优雅、简单易学。")]),t._v(" "),s("p",[s("img",{attrs:{src:"/step2/step1_03.jpeg",alt:"python"}})]),t._v(" "),s("p",[t._v("人生苦短，我用Python。\nPython语言以灵活易用著称。"),s("br"),t._v("\n在这里采用Python作为讲解和验证区块链概念的工具，"),s("br"),t._v("\n并不意味着要从头去学习Python语言。"),s("br"),t._v("\n涉及到实践的知识点都会贴出完整可运行的Python代码。"),s("br"),t._v("\n读者朋友只需要复制粘贴相应Python代码就可实际运行。")]),t._v(" "),s("p",[s("img",{attrs:{src:"/step2/step1_04.jpeg",alt:"Anaconda"}})]),t._v(" "),s("p",[t._v("Anaconda是开源的Python包管理器。"),s("br"),t._v("\n在Linux、macOS以及Windows系统中都有一键安装包，"),s("br"),t._v("\n安装了Anaconda就能拥有较完整的Python环境和相关类库。"),s("br"),t._v("\nAnaconda不只适合初学者，而且也是数据分析的标准环境。")]),t._v(" "),s("h4",{attrs:{id:"anaconda的安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#anaconda的安装"}},[t._v("#")]),t._v(" Anaconda的安装")]),t._v(" "),s("p",[t._v("在"),s("a",{attrs:{href:"https://www.anaconda.com/products/individual#Downloads",target:"_blank",rel:"noopener noreferrer"}},[t._v("Anaconda官网下载网址"),s("OutboundLink")],1),t._v("找到对应的操作系统安装版本:")]),t._v(" "),s("p",[s("img",{attrs:{src:"/step2/step1_05.png",alt:"Anaconda下载"}})]),t._v(" "),s("p",[t._v("注意选择Python 3.7版本的安装包。"),s("br"),t._v("\n通常你的电脑是Windows系统的话，选择左上角这个64位的安装包下载即可。"),s("br"),t._v("\n安装过程中，一路点击Next即可。")]),t._v(" "),s("h4",{attrs:{id:"python环境检查"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#python环境检查"}},[t._v("#")]),t._v(" Python环境检查")]),t._v(" "),s("p",[t._v("打开Anaconda Prompt程序。\n在windows环境下，可以在开始菜单找到：")]),t._v(" "),s("p",[s("img",{attrs:{src:"/step2/step1_06.png",alt:"prompt"}})]),t._v(" "),s("p",[t._v("在Prompt命令行中输入Python版本检查命令：")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("python --version\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[s("img",{attrs:{src:"/step2/step1_07.png",alt:"version"}})]),t._v(" "),s("p",[t._v("在D盘创建一个hello.py文件。在hello.py文件中输入一行简单代码：")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('print("你好，区块链!")\n')])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("保存并关闭hello.py文件,在Anaconda Prompt命令行中输入：")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("python d:\\hello.py\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("见到如下提示，代表环境检查成功。")]),t._v(" "),s("p",[s("img",{attrs:{src:"/step2/step1_08.png",alt:"hello"}})]),t._v(" "),s("h3",{attrs:{id:"_0x04-密码学安全的私钥生成方式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_0x04-密码学安全的私钥生成方式"}},[t._v("#")]),t._v(" 0x04 密码学安全的私钥生成方式")]),t._v(" "),s("p",[t._v("使用Python的内置secrets模块来生成高加密强度的随机数。"),s("br"),t._v("\n该函数的相关说明可以"),s("a",{attrs:{href:"https://docs.python.org/zh-cn/3.7/library/secrets.html#module-secrets",target:"_blank",rel:"noopener noreferrer"}},[t._v("参见Python官方文档"),s("OutboundLink")],1),t._v("。")]),t._v(" "),s("p",[s("img",{attrs:{src:"/step2/step1_09.png",alt:"官方文档"}})]),t._v(" "),s("p",[t._v("在命令行中输入Python回车，进入Python语言环境：")]),t._v(" "),s("p",[s("img",{attrs:{src:"/step2/step1_10.png",alt:"python环境"}})]),t._v(" "),s("p",[t._v("输入两行命令（输入一行后，回车再输入下一行）:")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("import secrets\nhex(secrets.randbits(256))[2:]\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br")])]),s("p",[t._v("第一行是引入secrets库，"),s("br"),t._v("\n第二行是生成一个256比特的随机数;"),s("br"),t._v("\nhex()是转换成十六进制字符串；"),s("br"),t._v("\n[2:]是去掉十六进制的“0x”前缀。")]),t._v(" "),s("p",[s("img",{attrs:{src:"/step2/step1_11.png",alt:"key"}})]),t._v(" "),s("p",[t._v("这样我们就得到了一个密码学安全的种子私钥。")]),t._v(" "),s("h3",{attrs:{id:"_0x05-主流公链公钥地址生成原理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_0x05-主流公链公钥地址生成原理"}},[t._v("#")]),t._v(" 0x05 主流公链公钥地址生成原理")]),t._v(" "),s("p",[t._v("在上一篇《私钥篇（1）》的讲述中，读者只是对私钥、公钥和地址有了一个比较笼统的印象。"),s("br"),t._v("\n下面我们从BTC、EOS、ETH、TRX主流公链逐一对照原理图看下生成公钥地址过程。")]),t._v(" "),s("blockquote",[s("p",[t._v("在原理图中，种子私钥采用了简单的有规律的64位十六进制数：\nabcdef0123456789abcdef0123456789abcdef0123456789abcdef0123456789\n在实际中切勿使用规律数字充当种子私钥！")])]),t._v(" "),s("h4",{attrs:{id:"btc比特币"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#btc比特币"}},[t._v("#")]),t._v(" BTC比特币")]),t._v(" "),s("p",[s("img",{attrs:{src:"/step2/step1_12.jpeg",alt:"btc原理图"}})]),t._v(" "),s("p",[t._v("私钥可以以许多不同的格式表示，所有这些格式都对应同一个256位的二进制种子私钥。")]),t._v(" "),s("p",[s("img",{attrs:{src:"/step2/step1_13.jpeg",alt:"私钥格式"}})]),t._v(" "),s("p",[t._v("私钥的压缩WIF(钱包导入格式）是一个"),s("strong",[t._v("历史遗留的不恰当用词")]),t._v('，压缩WIF还多出一个"01"字节。'),s("br"),t._v("\n早期的比特币采用非压缩公钥格式，后来考虑到节约区块空间，采取了压缩公钥。"),s("br"),t._v('\n为了兼容早期非压缩格式，后期的比特币私钥采用添加"01"后缀的压缩WIF与早期私钥区分。')]),t._v(" "),s("h4",{attrs:{id:"eosio生态系统"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#eosio生态系统"}},[t._v("#")]),t._v(" EOSIO生态系统")]),t._v(" "),s("p",[s("img",{attrs:{src:"/step2/step1_19.jpeg",alt:"eos原理图"}})]),t._v(" "),s("p",[t._v('EOS没有BTC的历史遗留包袱，所以私钥没有加"01"后缀。'),s("br"),t._v("\nEOS支持secp256k1、secp256r1两种椭圆曲线算法。"),s("br"),t._v("\n采用secp256r1算法生成的EOS公钥采用“PUB_R1_”为前缀。"),s("br"),t._v("\nEOS公钥其实严格来说是EOS地址，只是EOS多了一个“账号”概念，充当了地址作用。"),s("br"),t._v("\nEOS交易转账并不是转到公钥哈希生成的地址（EOS公钥），而是转到由公钥管理EOS账号。"),s("br"),t._v(" "),s("strong",[t._v("这个其实是非常大的优化改进，带来了巨大的灵活性和想象空间。")])]),t._v(" "),s("h4",{attrs:{id:"eth以太坊"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#eth以太坊"}},[t._v("#")]),t._v(" ETH以太坊")]),t._v(" "),s("p",[s("img",{attrs:{src:"/step2/step1_20.jpeg",alt:"eth原理图"}})]),t._v(" "),s("p",[t._v("可以对比看到，ETH地址格式没有任何校验信息。比特币和EOS都有4位校验码，校验码的作用主要是防止输入错误地址。"),s("br"),t._v("\nETH如此设计的设想是：ETH地址最终会隐藏在ENS (the Ethereum Name Service,以太坊域名服务)这样的抽象层之后，如果需要校验，也是在域名抽象层做校验。"),s("br"),t._v("\n只是目前来看，ETH抽象层的开发进展十分缓慢。")]),t._v(" "),s("h4",{attrs:{id:"trx波场"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#trx波场"}},[t._v("#")]),t._v(" TRX波场")]),t._v(" "),s("p",[s("img",{attrs:{src:"/step2/step1_21.jpeg",alt:"trx原理图"}})]),t._v(" "),s("p",[s("strong",[t._v("波场和ETH的生成公钥方法是一模一样的。")]),s("br"),t._v('\n只是在最后的地址格式上略有变化，把ETH的前缀"0x"换成"T"开头，后面加了4位校验码。')]),t._v(" "),s("h3",{attrs:{id:"_0x06-百行python代码演示一私钥多公链原理。"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_0x06-百行python代码演示一私钥多公链原理。"}},[t._v("#")]),t._v(" 0x06 百行Python代码演示一私钥多公链原理。")]),t._v(" "),s("p",[t._v("下面通过一段Python示意代码，来实际体验下同一个随机数生成BTC、ETH、EOS、TRX等主流公链生态私钥公钥和地址的过程。"),s("br"),t._v("\n从"),s("a",{attrs:{href:"https://gitee.com/xiao1983/blockchaincode/blob/master/allkey.py",target:"_blank",rel:"noopener noreferrer"}},[t._v("网上把源码allkey.py下载下来"),s("OutboundLink")],1),t._v("。")]),t._v(" "),s("p",[t._v("在命令行安装一下用到的几个加密库。")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("pip install base58 pysha3 ecdsa\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("直接运行python代码，系统会自动生成一个种子私钥：")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("python allkey.py\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("也可以在命令后附加种子私钥参数:")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("python allkey.py 1e99423a4ed27608a15a2616a2b0e9e52ced330ac530edcc32c8ffc6a526aedd\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("限于篇幅，这里只截取源码中部分关键函数进行说明：")]),t._v(" "),s("p",[s("img",{attrs:{src:"/step2/step1_22.png",alt:"privatekey2WIF"}})]),t._v(" "),s("p",[t._v("privateKey2WIF()函数是私钥的转换格式。"),s("br"),t._v("\nbtc、eos私钥通过此函数转换成对应的钱包格式私钥。")]),t._v(" "),s("p",[s("img",{attrs:{src:"/step2/step1_23.png",alt:"pri2pubcom"}})]),t._v(" "),s("p",[t._v("pri2pubcom()函数是私钥生成压缩格式公钥。btc、eos适用。"),s("br"),t._v("\npri2pub()函数是私钥生成非压缩格式公钥。eth、trx适用。")]),t._v(" "),s("p",[t._v("后面还有pub2addressbtc()、pub2addresseos()、pub2addresseth()、pub2addresstrx()四个函数，"),s("br"),t._v("\n分别对应的是btc、eos、eth、trx从公钥转换成地址(eos的是公钥)。")]),t._v(" "),s("p",[s("img",{attrs:{src:"/step2/step1_24.png",alt:"两种方式"}})]),t._v(" "),s("p",[t._v("在种子私钥来源上支持参数提供和python生成两种方式。")]),t._v(" "),s("h3",{attrs:{id:"_0x06-下篇内容预告"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_0x06-下篇内容预告"}},[t._v("#")]),t._v(" 0x06 下篇内容预告")]),t._v(" "),s("p",[t._v("从下篇文章开始，我们将开始注册第一个BOS主网账号，安装和学习命令行工具的使用，向着区块链深海出发。")]),t._v(" "),s("p",[s("strong",[t._v("私钥（3）：熟悉命令行工具，探秘区块链深层次世界。")])]),t._v(" "),s("blockquote",[s("p",[t._v("在互联网浏览器的技术实现中有一种“事件冒泡”的机制，就是当目标点有事件发生后，总是从本级开始，依次向外，通知和触发处理事件的函数。有点类似水面涟漪的效果。"),s("br"),t._v("\n其实，在区块链世界也有类似的情景。一个区块链项目(比如Defi等智能合约)部署落地时，总是从熟悉命令行底层工具的先尝试；然后，才是各大钱包的用户从适配好的前端界面入口体验尝鲜；最后，就是那些还呆在中心化交易所的用户，等着上币炒作了。"),s("br"),t._v("\n世之奇伟、瑰怪，非常之观，常在于险远，而人之所罕至焉。命令行工具虽然没有交易所、钱包等好用，却是捕获第一手区块链价值源头、探秘区块链深层次世界的必备神器。")])]),t._v(" "),s("h3",{attrs:{id:"_0x07-联系及投票支持"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_0x07-联系及投票支持"}},[t._v("#")]),t._v(" 0x07 联系及投票支持")]),t._v(" "),s("p",[t._v("《区块链财富指北》系列文章github存档地址："),s("a",{attrs:{href:"https://nocycom.github.io",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://nocycom.github.io"),s("OutboundLink")],1),t._v("。\n"),s("a",{attrs:{href:"https://nocy.com",target:"_blank",rel:"noopener noreferrer"}},[t._v("NOCY.com"),s("OutboundLink")],1),t._v("团队致力于区块链基础知识传播，欢迎读者朋友留言共同交流。\n由于发文时间仓促及区块链领域技术迭代频繁，在教程中可能有这样或那样的错漏之处，还请读者与我们一起查漏补缺、将系列教程优化的更好。")]),t._v(" "),s("p",[t._v("如果觉得这系列教程有点意思，请投票支持我们的节点："),s("a",{attrs:{href:"https://bos.eosx.io/tools/vote?voteTo=nocy.com",target:"_blank",rel:"noopener noreferrer"}},[t._v("BOS公链NOCYCOM节点"),s("OutboundLink")],1),t._v("，"),s("a",{attrs:{href:"https://www.eosx.io/tools/vote?voteTo=nocy.com",target:"_blank",rel:"noopener noreferrer"}},[t._v("EOS公链NOCYCOM节点"),s("OutboundLink")],1),t._v("。您的投票是本教程持续更新的动力源泉，谢谢。")])])}),[],!1,null,null,null);r.default=a.exports}}]);