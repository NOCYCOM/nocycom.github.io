(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{370:function(t,s,a){"use strict";a.r(s);var e=a(42),r=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"_1-钱包内嵌dapp的调用和交互。"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-钱包内嵌dapp的调用和交互。"}},[t._v("#")]),t._v(" 1.钱包内嵌DAPP的调用和交互。")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("声明")]),t._v(" "),a("p",[t._v("《区块链财富指北》系列文章由"),a("a",{attrs:{href:"https://nocy.com",target:"_blank",rel:"noopener noreferrer"}},[t._v("NOCY.COM"),a("OutboundLink")],1),t._v("策划，肖南飞主笔撰写。\n技术选型基于BOScore公链，旨在以有趣易懂的方式传播普及区块链技术，不构成任何投资建议！")])]),t._v(" "),a("h3",{attrs:{id:"_0x01-未来的app都将是dapp"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_0x01-未来的app都将是dapp"}},[t._v("#")]),t._v(" 0x01 未来的APP都将是DAPP")]),t._v(" "),a("p",[t._v("DAPP全称decentralized application，意思就是分布式应用或去中心化应用。"),a("br"),t._v("\nDApp通常指建立在区块链网络自身节点上、不依赖于任何中心化服务器的应用程序."),a("br"),t._v("\n它们通过对等节点网络上分发关键组件，并多半辅以配套的Token机制。"),a("br")]),t._v(" "),a("p",[t._v("传统手机APP通常是“前端--API--数据库”的形式，"),a("br"),t._v("\n前端拥有数以百万计的用户，后端仍是中心机构绝对控制，"),a("br"),t._v("\n用户的数据安全往往只能依赖于中心机构的信誉度。"),a("br"),t._v("\n如facebook等大公司盗用数据的丑闻屡见不鲜。"),a("br")]),t._v(" "),a("p",[t._v("DApp采用“前端——智能合约——区块链”模式，"),a("br"),t._v("\n用户的数据安全通过密码学和计算机代码进行保全。"),a("br"),t._v("\n革命性的用算法机制实现“陌生人信任”，重塑人类的协作关系。"),a("br")]),t._v(" "),a("p",[t._v("App的崛起和爆发某种程度上意味着移动互联网时代的全面到来，"),a("br"),t._v("\nDApp也必将取代App，把区块链的梦想照进现实，开启一个崭新的时代。"),a("br")]),t._v(" "),a("h3",{attrs:{id:"_0x02-从react脚手架开始"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_0x02-从react脚手架开始"}},[t._v("#")]),t._v(" 0x02 从React脚手架开始")]),t._v(" "),a("p",[t._v("使用create-react-app新建一个项目，名为tokensdapp。"),a("br")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("npm install -g create-react-app\ncreate-react-app tokensdapp\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("p",[t._v("等待安装完成后，目录结构如下："),a("br")]),t._v(" "),a("p",[a("img",{attrs:{src:"/step9/step9_01.png",alt:"01"}})]),t._v(" "),a("p",[t._v("测试运行下："),a("br")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("cd tokensdapp\nyarn start\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("p",[a("img",{attrs:{src:"/step9/step9_02.png",alt:"02"}})]),t._v(" "),a("p",[t._v("按照命令行提示，在浏览器中输入网址："),a("br")]),t._v(" "),a("p",[a("img",{attrs:{src:"/step9/step9_03.png",alt:"03"}})]),t._v(" "),a("p",[t._v("表示React基础脚手架配置成功。"),a("br")]),t._v(" "),a("h3",{attrs:{id:"_0x03-完善前端ui界面"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_0x03-完善前端ui界面"}},[t._v("#")]),t._v(" 0x03 完善前端UI界面")]),t._v(" "),a("p",[t._v("安装UI框架antd-mobile:"),a("br")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("npm install antd-mobile --save\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[a("img",{attrs:{src:"/step9/step9_04.png",alt:"04"}})]),t._v(" "),a("p",[t._v("配置按需加载："),a("br")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("npm install react-app-rewired customize-cra babel-plugin-import --save-dev\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[a("img",{attrs:{src:"/step9/step9_05.png",alt:"05"}})]),t._v(" "),a("p",[t._v("编辑package.json文件，将第15到18行的react-scripts替换为react-app-rewired："),a("br")]),t._v(" "),a("p",[a("img",{attrs:{src:"/step9/step9_06.png",alt:"06"}})]),t._v(" "),a("p",[t._v("在项目根目录创建config-overrides.js，代码如下："),a("br")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("const { override, fixBabelImports } = require('customize-cra');\nmodule.exports = override(\n  fixBabelImports('import', {\n    libraryName: 'antd-mobile',\n    style: 'css',\n  }),\n);\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br")])]),a("p",[t._v("在public目录下的index.html的body中添加一段js："),a("br")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("<script src=\"https://as.alipayobjects.com/g/component/fastclick/1.0.6/fastclick.js\"><\/script>\n    <script>\n      if ('addEventListener' in document) {\n        document.addEventListener('DOMContentLoaded', function() {\n          FastClick.attach(document.body);\n        }, false);\n      }\n    <\/script>\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br")])]),a("p",[t._v("然后将src下的App.js修改如下："),a("br")]),t._v(" "),a("p",[a("img",{attrs:{src:"/step9/step9_09.png",alt:"09"}})]),t._v(" "),a("p",[t._v('回到命令行，输入"yarn start"启动项目。'),a("br"),t._v("\n浏览器打开显示界面如下："),a("br")]),t._v(" "),a("p",[a("img",{attrs:{src:"/step9/step9_08.png",alt:"08"}})]),t._v(" "),a("h3",{attrs:{id:"_0x04-添加scatter库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_0x04-添加scatter库"}},[t._v("#")]),t._v(" 0x04 添加scatter库")]),t._v(" "),a("p",[t._v("ScatterJS是目前EOSIO生态钱包中支持比较多的组件库。"),a("br"),t._v("\ngithub地址在："),a("a",{attrs:{href:"https://github.com/GetScatter/scatter-js",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/GetScatter/scatter-js"),a("OutboundLink")],1),a("br"),t._v("\nscatter的github介绍页上列出了支持的钱包APP:"),a("br")]),t._v(" "),a("p",[a("img",{attrs:{src:"/step9/step9_19.png",alt:"19"}})]),t._v(" "),a("p",[t._v("首先安装相关组件库："),a("br")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("yarn add @scatterjs/core @scatterjs/eosjs2 eosjs@20.0.0\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[a("img",{attrs:{src:"/step9/step9_14.png",alt:"14"}})]),t._v(" "),a("p",[t._v("添加调试组件："),a("br")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("yarn add vconsole\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[a("img",{attrs:{src:"/step9/step9_15.png",alt:"15"}})]),t._v(" "),a("p",[t._v("再将APP.js代码修改如下："),a("br")]),t._v(" "),a("p",[a("img",{attrs:{src:"/step9/step9_16.png",alt:"16"}})]),t._v(" "),a("p",[a("img",{attrs:{src:"/step9/step9_17.png",alt:"17"}})]),t._v(" "),a("p",[a("img",{attrs:{src:"/step9/step9_18.png",alt:"18"}})]),t._v(" "),a("p",[t._v('回到命令行，输入"yarn start"启动项目。'),a("br")]),t._v(" "),a("h3",{attrs:{id:"_0x05-测试交互情况"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_0x05-测试交互情况"}},[t._v("#")]),t._v(" 0x05 测试交互情况")]),t._v(" "),a("p",[t._v("这里使用TokenPocket钱包在发现页面输入网址打开。"),a("br")]),t._v(" "),a("p",[a("img",{attrs:{src:"/step9/step9_20.png",alt:"20"}})]),t._v(" "),a("p",[t._v("DAPP启动后会自动执行连接钱包操作，并进行相应的提示。"),a("br"),t._v("\n右下角的vConsole是调试插件，点击会弹出相应的调试面板。"),a("br"),t._v("\n点击“登录”按钮测试："),a("br")]),t._v(" "),a("p",[a("img",{attrs:{src:"/step9/step9_21.png",alt:"21"}})]),t._v(" "),a("p",[t._v("可以看到成功读取了TP钱包里当前BOS账号的信息。"),a("br"),t._v("\n再点击“注销”按钮进行退出测试。"),a("br")]),t._v(" "),a("p",[a("img",{attrs:{src:"/step9/step9_22.png",alt:"22"}})]),t._v(" "),a("p",[t._v("成功退出登录。"),a("br")]),t._v(" "),a("h3",{attrs:{id:"_0x06-下篇内容预告"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_0x06-下篇内容预告"}},[t._v("#")]),t._v(" 0x06 下篇内容预告")]),t._v(" "),a("p",[t._v("在下篇文章里，我们继续探索DAPP。"),a("br"),t._v("\n***DAPP（2）：从钱包上调用合约发行通证（Token）。***"),a("br")]),t._v(" "),a("blockquote",[a("p",[t._v("常见的DAPP交互过程通常是："),a("br"),t._v("\n1.用户通过dapp前端界面选项按钮来构造一笔自定义的个性化交易信息；"),a("br"),t._v("\n2.交易构造好后点击提交按钮，dapp前端弹出界面交给钱包私钥签名；"),a("br"),t._v("\n3.钱包签名后，广播交易到区块链。dapp会监听用户的地址，在用户界面上显示区块链处理后的结果。"),a("br"),t._v("\n综上所述，用户使用Dapp其实就是Dapp的用户界面协助用户构造交易，交易提交给钱包签名，钱包广播交易，Dapp监听区块链，给用户反馈结果。"),a("br"),t._v("\n在区块链项目开发中，智能合约部署完成，实现的是可用性。"),a("br"),t._v("\n完善友好的前端交互界面，则是在易用性上作文章，是使项目真正普及开来的入口。"),a("br"),t._v("\n这篇教程文章，我们来构建从钱包上调用智能合约。"),a("br")])]),t._v(" "),a("h3",{attrs:{id:"_0x07-联系及投票支持"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_0x07-联系及投票支持"}},[t._v("#")]),t._v(" 0x07 联系及投票支持")]),t._v(" "),a("p",[t._v("《区块链财富指北》系列文章github存档地址："),a("a",{attrs:{href:"https://nocycom.github.io",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://nocycom.github.io"),a("OutboundLink")],1),t._v("。\n"),a("a",{attrs:{href:"https://nocy.com",target:"_blank",rel:"noopener noreferrer"}},[t._v("NOCY.com"),a("OutboundLink")],1),t._v("团队致力于区块链基础知识传播，欢迎读者朋友留言共同交流。\n由于发文时间仓促及区块链领域技术迭代频繁，在教程中可能有这样或那样的错漏之处，还请读者与我们一起查漏补缺、将系列教程优化的更好。")]),t._v(" "),a("p",[t._v("如果觉得这系列教程有点意思，请投票支持我们的节点："),a("a",{attrs:{href:"https://bos.eosx.io/tools/vote?voteTo=nocy.com",target:"_blank",rel:"noopener noreferrer"}},[t._v("BOS公链NOCYCOM节点"),a("OutboundLink")],1),t._v("，"),a("a",{attrs:{href:"https://www.eosx.io/tools/vote?voteTo=nocy.com",target:"_blank",rel:"noopener noreferrer"}},[t._v("EOS公链NOCYCOM节点"),a("OutboundLink")],1),t._v("。您的投票是本教程持续更新的动力源泉，谢谢。")])])}),[],!1,null,null,null);s.default=r.exports}}]);