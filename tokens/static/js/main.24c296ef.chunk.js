(this.webpackJsonptokensdapp=this.webpackJsonptokensdapp||[]).push([[0],{120:function(t,e,n){t.exports=n(241)},188:function(t,e,n){},201:function(t,e){},206:function(t,e){},208:function(t,e){},241:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),o=n(16),c=n.n(o),s=(n(125),n(111)),i=n.n(s),u=(n(89),n(28)),l=n.n(u),m=(n(170),n(75)),h=n.n(m),f=n(14),p=n.n(f),k=n(112),d=(n(182),n(22)),y=n.n(d),g=n(115),E=n(116),b=n(118),v=n(119),N=(n(188),n(17)),C=n.n(N),x=n(117),A=n.n(x),_=n(76),S=C.a.Network.fromJson({blockchain:"eos",chainId:"d5a3d18fbb3c084e3b1f3fa98c21014b5f3db536cc15d08f9f6479517c6a3d86",host:"api.boscore.io",port:443,protocol:"https"}),w=new _.JsonRpc(S.fullhost());C.a.plugins(new A.a);var j="",I="",O=function(t){Object(v.a)(n,t);var e=Object(b.a)(n);function n(t){var a;return Object(g.a)(this,n),(a=e.call(this,t)).onErrorClick=function(){a.state.hasError&&y.a.info("Token\u540d\u79f0\u53ea\u80fd\u8f93\u5165\u5927\u5199\u82f1\u6587\u5b57\u6bcd!")},a.onChangeName=function(t){t.replace(/[^A-Z]/g,"")?a.setState({hasError:!1}):a.setState({hasError:!0}),a.setState({tokenName:t.toUpperCase()})},a.onChangeNum=function(t){a.setState({tokenNum:t})},a.state={currentAccount:"\u672a\u8fde\u63a5",currentPermission:"",tokenName:"",tokenNum:"",hasError:!1,historylist:[]},a}return Object(E.a)(n,[{key:"componentDidMount",value:function(){var t=this;C.a.scatter.connect("scatter-demo").then((function(e){if(!e)return y.a.fail("\u8fde\u63a5\u94b1\u5305\u5931\u8d25\uff01"),!1;y.a.success("\u8fde\u63a5\u94b1\u5305\u6210\u529f\uff01",2),j=C.a.scatter,t.login(),t.getinfo()}))}},{key:"login",value:function(){var t=this;j.login().then((function(e){if(!e)return console.error("no identity");var n=C.a.account("eos");t.setState({currentAccount:n.name,currentPermission:n.authority}),I=j.eos(S,_.Api,{rpc:w})})).catch((function(t){y.a.fail("\u83b7\u53d6\u8d26\u53f7\u4fe1\u606f\u5931\u8d25\uff01"),console.error(t)}))}},{key:"getinfo",value:function(){var t=this;console.log("get tokens info"),Object(k.a)(p.a.mark((function e(){var n,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.history_get_actions("tokens");case 2:n=e.sent.actions,a=[],n.map((function(t){return"create"===t.action_trace.act.name?a.push({blocktime:t.action_trace.block_time,issuer:t.action_trace.act.data.issuer,maximum_supply:t.action_trace.act.data.maximum_supply}):t.action_trace.act.name})),t.setState({historylist:a}),console.log(t.state.historylist);case 7:case"end":return e.stop()}}),e)})))()}},{key:"pushtx",value:function(){var t=this;this.state.currentAccount?I.transact({actions:[{account:"tokens",name:"create",authorization:[{actor:this.state.currentAccount,permission:this.state.currentPermission}],data:{issuer:this.state.currentAccount,maximum_supply:this.state.tokenNum+" "+this.state.tokenName}},{account:"tokens",name:"issue",authorization:[{actor:this.state.currentAccount,permission:this.state.currentPermission}],data:{to:this.state.currentAccount,quantity:this.state.tokenNum+" "+this.state.tokenName,memo:"tokens issue"}}]},{blocksBehind:3,expireSeconds:3e3}).then((function(e){y.a.success("\u53d1\u9001\u6210\u529f!"),t.getinfo()})).catch((function(t){y.a.fail("\u53d1\u9001\u5931\u8d25\uff1a"+t),console.log("fail"+JSON.stringify(t))})):y.a.fail("\u83b7\u53d6\u8d26\u53f7\u4fe1\u606f\u5931\u8d25\uff01")}},{key:"render",value:function(){var t=this;return r.a.createElement("div",null,r.a.createElement(l.a,{renderHeader:function(){return"\u767b\u5f55\u8d26\u53f7\uff1a"+t.state.currentAccount}},r.a.createElement(h.a,{clear:!0,placeholder:"SYS",error:this.state.hasError,onErrorClick:this.onErrorClick,onChange:this.onChangeName,value:this.state.tokenName},"Token\u540d\u79f0"),r.a.createElement(h.a,{type:"money",moneyKeyboardAlign:"left",clear:!0,placeholder:"1000000000.0000",onChange:this.onChangeNum,value:this.state.tokenNum},"\u53d1\u884c\u603b\u91cf"),r.a.createElement(l.a.Item,null,r.a.createElement("div",{style:{width:"100%",color:"#108ee9",textAlign:"center"},onClick:function(){return t.pushtx()}},"\u4e00\u952e\u53d1\u884c"))),r.a.createElement(i.a,{size:"md"}),r.a.createElement(l.a,{renderHeader:function(){return"\u901a\u8bc1\u53d1\u884c\u8bb0\u5f55"}},this.state.historylist?this.state.historylist.map((function(t){return r.a.createElement(l.a.Item,{extra:t.blocktime.substring(0,10),thumb:"https://zos.alipayobjects.com/rmsportal/dNuvNrtqUztHCwM.png",multipleLine:!0},t.maximum_supply,r.a.createElement(l.a.Item.Brief,null,"\u8d26\u53f7\uff1a",t.issuer))})):r.a.createElement(l.a.Item,null,r.a.createElement("p",null,"\u533a\u5757\u94fe\u6570\u636e\u52a0\u8f7d\u4e2d..."))))}}]),n}(a.Component);c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(O,null)),document.getElementById("root"))}},[[120,1,2]]]);
//# sourceMappingURL=main.24c296ef.chunk.js.map